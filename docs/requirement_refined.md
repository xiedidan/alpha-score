# Binance Alpha 自动化交易工具需求与系统设计文档

## 1. 项目概述

### 1.1 项目背景
币安 Alpha 平台连接用户与早期 Web3 项目，用户通过交易专区内代币获得 Alpha Points 积分，该积分是参与独家空投和 TGE（代币生成事件）的核心资源。由于手动操作效率低下，且难以在市场波动中精确控制交易成本，本项目旨在开发一个**隐蔽、稳定、高效**的自动化交易系统，实现 Alpha 积分的自动化获取，并通过网格交易策略优化资金利用效率。

### 1.2 项目目标
*   **核心目标**：自动化执行币安 Alpha 专区内代币的买卖操作，最大化 Alpha Points 积分收益
*   **优化目标**：在积分获取间歇期，利用闲置资金在选定的稳定币种上执行网格交易，创造额外收益以对冲交易磨损成本
*   **风控目标**：通过浏览器端模拟真实人类操作行为，结合严格的资金管理和市场风险监控机制，有效规避平台风控并控制资产风险

---

## 2. 系统需求规格说明

### 2.1 功能性需求

#### 2.1.1 Alpha 积分获取与优化
*   **积分计算规则**：遵循币安官方规则，基于**账户资产余额**（提供基础积分）和**每日买入 Alpha 代币的金额**（提供交易积分）计算总积分
*   **策略引擎**：根据目标积分自动计算每日需达到的交易额，支持用户指定交易代币

#### 2.1.2 自动化积分获取交易执行
*   **交易循环**：实现快速、低磨损的"买入即卖出"循环操作
*   **核心策略**：支持设置略高/低于买一价的**限价买单**和略低/高于卖一价的**限价卖单**（反向限价单），最小化滑点和手续费造成的磨损（目标：单次交易磨损控制在可设定范围，如 0.2 USDT）
*   **可配置参数**：
    *   **交易所参数**：指定币种的交易手续费比例（买入/卖出）
    *   **订单参数**：限价单偏移量（买入/卖出，可取正负值）、下单仓位比例
    *   **限制参数**：最大可下单 ATR（当 ATR 过大时说明价格波动剧烈，禁止下单）
*   **运行模式**：
    *   **全自动模式**：系统根据设置全自动执行交易操作，达到目标交易额自动停止，用户仅负责启停控制
    *   **半自动模式**：系统自动计算并填入符合规则的买卖订单价位，用户负责启停及订单确认

#### 2.1.3 网格交易策略
*   **目标**：在积分获取交易的资金闲置期，自动在指定的稳定币对上执行网格交易，利用市场波动赚取价差，创造被动收入以对冲交易成本
*   **参数配置**：支持可配置的网格参数
    *   价格区间（上限/下限）
    *   网格数量
    *   每格投资金额
*   **币种选择**：策略应优先应用于价格稳定、流动性高的币种（如 `KOGE`）或长期看好的主流币（如 `BNB`），由用户配置

#### 2.1.4 用户身份认证与会话管理
*   **首选方案**：通过远程调试协议连接已由用户手动登录的浏览器实例，简化系统实现
*   **登录状态检测**：系统支持检测币安登录状态，当登录失效时，通过 Discord/Telegram/飞书或 PushPlus 通知用户
*   **系统安全**：系统自身需要登录机制以保护用户信息与资金安全

#### 2.1.5 OSD 显示
*   **功能描述**：将积分获取状态、决策信息、系统状态等以 OSD（屏幕叠加显示）形式实时叠加显示在交易屏幕上
*   **可配置项**：OSD 的位置、颜色、尺寸等

---

### 2.2 非功能性需求（高优先级）

#### 2.2.1 隐蔽性与抗检测能力（最高优先级）
*   所有操作必须模拟真实人类行为，包括：
    *   随机延迟
    *   非直线鼠标移动轨迹
    *   在页面不同区域随机悬停和浏览
*   采用连接已存在用户会话的浏览器实例的方式进行自动化操作，最大程度降低被识别为机器人的风险

#### 2.2.2 稳定性与可靠性
*   系统应能稳定运行，具备自动处理网络异常、交易所 API 限流/中断等异常情况的能力

#### 2.2.3 可维护性与可扩展性
*   采用模块化设计，便于未来增加新的交易策略或适配其他交易平台

---

## 3. 系统架构与核心模块设计

### 3.1 技术选型

| 组件 | 推荐技术/工具 | 理由 |
| :--- | :--- | :--- |
| **浏览器自动化** | **Playwright** | API 现代简洁，内置智能等待，对单页应用（SPA）支持更好，适合处理币安 Alpha 这类动态内容丰富的页面 |
| **编程语言** | **Python** | 生态丰富，开发效率高 |
| **管理界面** | **Vue3 + Vite** | 提供后台管理界面方便用户查看积分获取、网格交易状态，并进行实时参数配置 |
| **部署环境** | **Hyper-V 虚拟机 (Windows 11)** | 实现环境隔离，保证 IP 地址和行为环境的稳定性，避免影响宿主机 |
| **模型接入** | **OpenAI Compatible API** | 接入 OpenAI Compatible API 可大幅扩充系统应变能力，可根据设计使用图像、文字识别、推理大模型等 |
| **数据库** | **SQLite** | 简化部署，支持数据格式化存储 |

---

### 3.2 核心模块设计

#### 3.2.1 数据监控采集与记录模块
*   **数据监控采集子模块**：通过 Playwright 控制浏览器，实时监控 Alpha 专区交易页面（支持多开页面以获取多种数据）
*   **数据记录子模块**：记录历史数据以便用户对数据建模分析，迭代优化策略

#### 3.2.2 策略引擎（核心）
*   **积分优化子模块**：根据积分规则和持仓情况，结合当日网格交易额，计算每日最优交易额
*   **网格交易子模块**：管理网格策略参数，根据市场行情生成网格买入/卖出信号
*   **资金分配策略**：建议将资金池分割为"积分获取备用金"（高流动性）和"网格策略金"（长期资金），例如 60% 用于积分获取，40% 用于网格交易

#### 3.2.3 交易执行与风控模块
*   **执行器**：接收策略引擎指令，通过 Playwright 执行积分获取交易和网格交易
*   **风控子模块**：
    *   **积分获取风控**：设置最大持仓比例、每日总交易量上限；监控价格波动，异常时暂停交易
    *   **网格风控**：为网格策略设置总仓位止损线，防止单边市造成巨大亏损

#### 3.2.4 人性化行为模拟模块
*   **职责**：为所有自动化操作增加人类行为特征，如随机延迟、模拟鼠标移动轨迹、随机滚动页面等

#### 3.2.5 OSD 显示模块
*   **职责**：滚动显示积分获取交易状态，叠加显示在目标虚拟机屏幕上

---

## 4. 关键实现细节与策略

### 4.1 保障操作隐蔽性
*   **核心方案**：使用 Playwright 通过 `--remote-debugging-port` 连接一个已由用户手动打开并完成登录的浏览器实例。这能直接复用完整的浏览器会话和指纹，隐蔽性最佳
*   **行为模拟**：在关键操作间注入随机延迟，模拟人类"思考"时间；使用曲线移动鼠标而非直接定位

### 4.2 积分获取策略优化
*   **下单技巧**：参考实战经验，可通过点击最新价并微调尾数的方式设置限价单，并结合"反向订单"功能实现快速成交
*   **磨损控制**：设置订单价格尾数偏移量，并精确计算手续费和价差成本

### 4.3 网格交易策略集成
*   **策略逻辑**：在设定的价格区间内，等分设置多个买入和卖出档位。价格下跌时逐格买入，上涨时逐格卖出，赚取波段利润
*   **参数配置**：
    *   **价格区间**：基于代币历史波动率分析设定
    *   **网格数量**：权衡网格密度与每格利润
    *   **触发条件**：可设置为在积分获取间歇期自动激活
*   **风险控制**：必须为网格策略设置止损条件，避免因代币单边暴跌而持续买入导致深套

---

## 5. 部署、监控与安全

### 5.1 部署方案
建议在 **Hyper-V 虚拟机**中部署 Windows 11 系统并运行该自动化工具。此方案可实现环境隔离、IP 地址稳定，并保证持续运行。

### 5.2 安全注意事项（至关重要）
1.  **账户安全**：妥善保管用于远程调试的浏览器配置文件，避免泄露
2.  **合规性**：用户需自行了解并严格遵守币安平台的服务条款

### 5.3 日志与监控
系统应记录详细的操作日志，包括登录状态、交易明细、积分变动、磨损情况和错误信息，便于审计和优化。
